<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:Olhuz.ViewModels"
    x:Class="Olhuz.Components.SideMenuView"
    x:Name="MenuView"
    BackgroundColor="#CDE8FF">
    <ContentView.BindingContext>
        <vm:MenuViewModel/>
    </ContentView.BindingContext>

    <Grid RowDefinitions="2*, 8.5*">
        <HorizontalStackLayout
            Grid.Row="0"
            HorizontalOptions="Center"
            VerticalOptions="Center"
            Spacing="14"
            Margin="0,0,10,0"
            MinimumHeightRequest="60"
            Padding="0">
            
            <Image
                Source="logo.png"
                Aspect="AspectFit"
                MaximumWidthRequest="60"
                VerticalOptions="Center"/>

            <Label
                    Text="Olhuz"
                    FontSize="40"
                    VerticalOptions="Center"/>

        </HorizontalStackLayout>

        <Border
            Grid.Row="1"
            BackgroundColor="Bisque"
            StrokeShape="RoundRectangle 0 200 0 0"
            StrokeThickness="0"
            Shadow="{x:Null}"
            HorizontalOptions="Fill">

            <VerticalStackLayout VerticalOptions="Center" Padding="0">
                <VerticalStackLayout BindableLayout.ItemsSource="{Binding Items}">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>

                            <Border
                                x:Name="MenuOptionBorder"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 40 0 40 0"
                                Padding="10, 20"
                                Margin="20, 4, 0,4" 
                                Shadow="{x:Null}">

                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal" />
                                        <VisualState x:Name="PointerOver">
                                            <VisualState.Setters>
                                                <Setter Property="BackgroundColor" Value="#EEEEEE" />
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>

                                <Border.Triggers>
                                    <DataTrigger TargetType="Border" Binding="{Binding IsSelected}" Value="True">
                                        <Setter Property="BackgroundColor" Value="#111F69" />
                                    </DataTrigger>

                                    <DataTrigger TargetType="Border" Binding="{Binding IsSelected}" Value="False">
                                        <Setter Property="BackgroundColor" Value="Transparent" />
                                    </DataTrigger>
                                </Border.Triggers>

                                <Border.GestureRecognizers>
                                    <TapGestureRecognizer
										Command="{Binding Source={x:Reference MenuView}, Path=BindingContext.NavigateCommand}"
										CommandParameter="{Binding .}" />
                                </Border.GestureRecognizers>

                                <HorizontalStackLayout Spacing="24">
                                    <Image 
                                        x:Name="MenuIcon"
                                        Source="{Binding Icon}" 
                                        HeightRequest="30" 
                                        Aspect="AspectFit"/>
                                    <Label 
                                        x:Name="MenuLabel"
                                        Text="{Binding Title}" 
                                        TextColor="DarkOrange" 
                                        FontSize="24" 
                                        VerticalOptions="Center"/>
                                </HorizontalStackLayout>

                            </Border>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </VerticalStackLayout>
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentView>